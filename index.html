<!DOCTYPE html>
<html lang="en">
<head>
    <!-- jQuery Library -->
    <!-- <script src="jquery-3.5.1.min.js"></script>  -->
    <!-- jQuery Library -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marsellink</title>

    <style>
        h1 {text-align: center;}
        p {text-align: center;}
        button { 
            height: 40px; 
            width: 80px; 
            } 
        .clrBtn{
            height:25px;
            width:90px;
        }
    </style>
</head>
<body>
<!------------------------------------------------------------------------------------------------------------------------->

 <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>

    <script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
        apiKey: "AIzaSyBW3eNdDOur0AaOIb2t5pFelKoEGjgWOJ4",
        authDomain: "linksafe-69.firebaseapp.com",
        databaseURL: "https://linksafe-69.firebaseio.com",
        projectId: "linksafe-69",
        storageBucket: "linksafe-69.appspot.com",
        messagingSenderId: "945067236274",
        appId: "1:945067236274:web:fb5a4dbfd0e18043e3e2ab",
        measurementId: "G-ZCWM2H6108"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
  
//----------------------------------------------------------------------------------------------------------------------

        function writeData(cb) {
            firebase.database().ref(cb).push( {     
                    Title: document.getElementById("Title").value,
                    Link: document.getElementById("Link").value
                });
        }
        function fetchData(){
          firebase.database().ref().once('value').then(function(snapshot){
                snapshot.forEach(function(ChildSnapshot){          
                var tags=ChildSnapshot.key; // EXPERIMENT LATER!!
                var isi=Object.keys(ChildSnapshot.val());
                console.log("isi: "+isi)
                    
                        isi.forEach(x => {
                            var listsTitle=ChildSnapshot.val()[x].Title;
                            console.log("list title: "+listsTitle)
                            var listsLink=ChildSnapshot.val()[x].Link;
                            
                            var ul=document.getElementById('list')
                            var Header=document.createElement('h2')
                            var _Title=document.createElement('li')
                            var hy=document.createElement('li')
                            
                            var temp=listsLink;
                            var temps=temp.link(temp);
                            if(temp>0&&temp<999999)
                            var temps=temp.link("https://www.nhentai.net/g/"+temp);
                            console.log(temps);
                            Header.innerHTML=tags;
                            _Title.innerHTML=listsTitle;
                            hy.innerHTML=temps;
                            ul.appendChild(Header); 
                            ul.appendChild(_Title);
                            ul.appendChild(hy);
                            
                        })
                    }
                );
            });
        }
        fetchData();
        function reOnClick(){
            location.reload();
        }

    </script>
    
    <h1>Save ur Precious Links!
    <br>
    <input type="text" placeholder="Title" id="Title">
    <br>
    <input type="text" placeholder="Link/Code" id="Link">  
    <br>
    <form>
        <p style="font-size:50%;">    
            <input type="checkbox" id="check1" name='a' value="Wholesome," onclick="fetchCb(this,id)">Wholesome</input>
            <input type="checkbox" id="check2" name='b' value="Good art," onclick="fetchCb(this,id)">Good Art</input>
            <input type="checkbox" id="check3" name='c' value="NTR," onclick="fetchCb(this,id)">NTR</input>
            <input type="checkbox" id="check4" name='d' value="Others," onclick="fetchCb(this,id)">Others</input>
        </p>
    </form>
    <button class="clrBtn" onclick="clearTags()">Clear Tags</button><br><br>
    <script>

    let cb="";
    function fetchCb(checkbox,id){
    var hold = document.getElementById(id).value;

    if(checkbox.checked==true){ //bila checkbox inactive, remove the value from header
        if(cb!=hold && cb.indexOf(hold)==-1){   //bila ada kalimat dobel, ignore
            cb=cb+" "+hold;
        }
    }else{
            cb=cb.replace(hold,"");
    }
    console.log("cb fix: "+cb);
    }
    function clearTags(){
        document.getElementById("check1").checked=false;
        document.getElementById("check2").checked=false;
        document.getElementById("check3").checked=false;
        document.getElementById("check4").checked=false;
        cb="";
    }
    </script>    
    <button id="submit" onclick ="writeData(cb);reOnClick()"><p style="font-size:100%;"></p><strong>Submit</strong></p></button>
    <br>
    </h1>
    <ul id="list"></ul> <!-- Print all Lists-->
    
</body>
</html>

