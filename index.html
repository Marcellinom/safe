<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marsellink</title>

    <style>
        h1 {text-align: center;}
    </style>
</head>
<body>

            <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>

    <script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
        apiKey: "AIzaSyBW3eNdDOur0AaOIb2t5pFelKoEGjgWOJ4",
        authDomain: "linksafe-69.firebaseapp.com",
        databaseURL: "https://linksafe-69.firebaseio.com",
        projectId: "linksafe-69",
        storageBucket: "linksafe-69.appspot.com",
        messagingSenderId: "945067236274",
        appId: "1:945067236274:web:fb5a4dbfd0e18043e3e2ab",
        measurementId: "G-ZCWM2H6108"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
//----------------------------------------------------------------------------------------------------------------------
        var index=0;   //TO DO: PUT TAGS INTO ARRAY!!
        //var tags;
        function writeDataWh() {
            firebase.database().ref("Wholesome").push( {     
                    Title: document.getElementById("Title").value,
                    Link: document.getElementById("Link").value
                });
        }
        function writeDataNtr() {
            firebase.database().ref("NTR").push( {     
                    Title: document.getElementById("Title").value,
                    Link: document.getElementById("Link").value
                });
        }
        function writeDataGa() {
            firebase.database().ref("GoodArt").push( {     
                    Title: document.getElementById("Title").value,
                    Link: document.getElementById("Link").value
                });
        }
        function writeDataOt() {
            firebase.database().ref("Others").push( {     
                    Title: document.getElementById("Title").value,
                    Link: document.getElementById("Link").value
                });
        }
        
        function fetchData(){
          firebase.database().ref().once('value').then(function(snapshot){
                snapshot.forEach(function(ChildSnapshot){          
                var tags=ChildSnapshot.key; // EXPERIMENT LATER!!
                var isi=Object.keys(ChildSnapshot.val());

                        console.log(tags);
                        console.log(isi);
                        console.log(ChildSnapshot.val());
                        isi.forEach(x => {
                            console.log(ChildSnapshot.val()[x]);
                            var listsTitle=ChildSnapshot.val()[x].Title;
                            var listsLink=ChildSnapshot.val()[x].Link;
                            console.log(listsTitle);
                            console.log(listsLink);

                            var ul=document.getElementById('list')
                            var Header=document.createElement('h2')
                            var _Title=document.createElement('li')
                            var _Link=document.createElement('li')

                            Header.innerHTML=tags;
                            _Title.innerHTML=listsTitle;
                            _Link.innerHTML=listsLink;
                            ul.appendChild(Header);
                            ul.appendChild(_Title);
                            ul.appendChild(_Link);
                        })
                    }
                );
            });
        }
        fetchData();

        function reOnClick(){
            location.reload();
        }

    </script>
    
    <h1>Save ur Precious Links!
    <br>
    <input type="text" onfocus="this.value=''" placeholder="Title" id="Title">
    <br>
    <input type="text" onfocus="this.value=''" placeholder="Link/Code" id="Link">  
    <br>    
    <button onClick ="writeDataWh();reOnClick()">Wholesome</button>
    <button onClick ="writeDataNtr();reOnClick()">Ntr</button>
    <button onClick ="writeDataGa();reOnClick()">Good Art</button>
    <button onClick ="writeDataOt();reOnClick()">Others</button>
    <br>
    </h1>
    <!-- <p>Link: <strong id="linkPrint"></strong></p> -->
    <ul id="list"></ul> <!-- Print all Lists-->
</body>
</html>
